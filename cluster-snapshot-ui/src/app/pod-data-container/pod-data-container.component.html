<div class="pad-left">
  <div style="display: flex;">
    <div class="card text-center" style="width: 300px;">
      <div class="card-body">
        <h5 class="card-title">Pods Running</h5>
        <p class="card-text"></p>
        <a class="btn btn-primary" (click)="refreshPodDetails()" [ngbTooltip]="'Refresh data'">
          {{podList ? podList.length : 0}}</a>
      </div>
      <div class="card-footer text-muted" style="font-size: 10px">
        <div class="custom-control custom-switch" [ngbTooltip]="'Toggle auto-refresh'"
             style="float: left; margin-right: 7%">
          <input type="checkbox" class="custom-control-input" id="customSwitch1"
                 [checked]="snapshot.autoRefreshEnabled" (click)="toggleAutoRefresh()">
          <label class="custom-control-label" for="customSwitch1"></label>
        </div>
        <span style="float: right" id="refreshDuration">
          Last refreshed: <i class="fa fa-refresh fa-spin fa-fw"></i></span>
      </div>
    </div>

    <div style="margin-left: 25px" class="card text-center">
      <chart-component></chart-component>
    </div>

  </div>

  <br>

  <div class="pad-bottom" style="display: flex">
    <input type="search" class="mr-sm-2" placeholder="Search" [(ngModel)]="searchText">
    <div class="dropdown" style="margin-left: 25px">
      <select class="form-control-sm" (change)="setNamespaceFilter($event)">
        <option selected value="all">All Namespaces</option>
        <option *ngFor="let namespace of namespaceList" value="{{namespace}}">{{namespace}}</option>
      </select>
    </div>

    <div class="dropdown" style="margin-left: 25px">
      <select class="form-control-sm" (change)="setPodStatusFilter($event)">
        <option selected value="all">All status</option>
        <option *ngFor="let status of podStatusList" value="{{status}}">{{status}}</option>
      </select>
    </div>
  </div>


  <div class="pad-bottom"
       *ngFor="let pod of podList | PodSearchPipe: searchText: namespaceFilter: podStatusFilter">
    <button *ngIf="pod.deleted" type="button" class="btn btn-xs btn-danger" data-toggle="collapse"
            [attr.data-target]="'#' + pod.podName.split('.')[0]">{{pod.podName}}</button>

    <button *ngIf="!pod.deleted" type="button" class="btn btn-xs btn-info" data-toggle="collapse"
            [ngClass]="{'pod-not-ready': !isReady(pod)}" [ngbTooltip]="pod.age + ' old'"
            [attr.data-target]="'#' + pod.podName.split('.')[0]">{{pod.podName}}</button>
    <ngbd-modal-options *ngIf="!pod.deleted" [podModal]="pod"></ngbd-modal-options>
    <span style="margin-left: 10px">
      <i *ngIf="pod.deleted" style="color: tomato" class="fa fa-trash fa-spin fa-fw"
         [ngbTooltip]="'Pod deleted in ' + pod.age"></i>
      <i *ngIf="!isReady(pod)" class="fa fa-refresh fa-spin fa-fw"
         [ngbTooltip]="'Pod not ready'"></i>
    </span>

    <span style="float: right; margin-right: 7%">
      <button *ngIf="!pod.deleted" class="btn btn-sm btn-primary" (click)="refreshPodLogs(pod)"
              [ngbTooltip]="'Refresh logs'" style="margin-right: 5px">
        <i class='fa fa-refresh' title="Refresh logs"></i>
      </button>
      <app-download-component [component]="pod" [type]="'podservice'"></app-download-component>

    </span>
    <div id="{{pod.podName.split('.')[0]}}" class="collapse">
      <span><b>{{pod.podCommand}}</b></span>
      <span *ngIf="pod.restarts > 0"><br><b>Number of restarts: {{pod.restarts}}</b></span>
      <span *ngIf="pod.podMemory"><b>Memory usage: {{pod.podMemory}}</b></span>
      <code class="modal-content" style="max-height: 500px;max-width: 90%; overflow-y: auto">
        <pre>{{ pod.logs }}</pre>
      </code>
    </div>
  </div>

</div>
